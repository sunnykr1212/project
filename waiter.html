<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <form onsubmit="savedtols(event)">
        <label>choose price:</label>
        <input type="number" id="amount" name="amount" required>
        <label>choose dish:</label>
        <input type="text" id="description" name="description" required>
        <label for="categ">choose a category:</label>
        <select id="categ">
            <option value="table1">table1</option>
            <option value="table2">table2</option>
            <option value="table3">table3</option>
            <option value="table4">table4</option>

        </select>
        <button>Add to bill</button>
    </form>
    <ul id="lists"></ul>
</body>
</html>


<script>
    function savedtols(event){
        event.preventDefault();
        const amount=event.target.amount.value;
            const description=event.target.description.value;
            const categ=event.target.categ.value;
        
            const obj={
                amount:amount,
                description:description,
                categ:categ
            }
            axios.post("https://crudcrud.com/api/c654e3be61654ef295ed68dc84bc905c/bookingtable",obj)
            .then((response)=>{
                showDetailsOnScreen(response.data)
                console.log(response)
            })
            .catch((err)=>{
                console.log(err)
            });


            // localStorage.setItem("details",JSON.stringify(obj));
            
            // showDetailsOnScreen(obj);
            // let out=JSON.parse(localStorage.getItem("details"));
            // console.log(out);

    }

    window.addEventListener("DOMContentLoaded",()=>{
            axios.get("https://crudcrud.com/api/c654e3be61654ef295ed68dc84bc905c/bookingtable")
            .then((response)=>{
                console.log(response)

                for(var i=0;i<response.data.length;i++){
                    showDetailsOnScreen(response.data[i]);
                }
            })
            .catch((err)=>{
                console.log(err)
            });
        })

    function showDetailsOnScreen(obj){
            const parentElem=document.getElementById("lists");
            const childElem=document.createElement("li");
            childElem.textContent=obj.amount+"-"+obj.description+"-"+obj.categ

            const deleteButton=document.createElement("input");
            deleteButton.type="button"
            deleteButton.value="Delete Order"
            deleteButton.onclick=()=>{
                localStorage.removeItem(obj.description)
                parentElem.removeChild(childElem)
            }
            // const editButton=document.createElement("input")
            // editButton.type="button"
            // editButton.value="Edit Expense"
            // editButton.onclick=()=>{
            //     document.getElementById("amount").innerText=obj.amount
            //     document.getElementById("description").innerText=obj.description
            //     document.getElementById("categ").innertext=obj.categ
            //     localStorage.setItem("details",obj.description)
            // }
            // childElem.appendChild(editButton);
            childElem.appendChild(deleteButton);
            parentElem.appendChild(childElem);
        }


</script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/axios/1.3.4/axios.min.js"></script>